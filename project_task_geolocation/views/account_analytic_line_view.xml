<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!--Form view-->
    <record model="ir.ui.view" id="hr_timesheet_line_form">
        <field name="name">account.analytic.line.form</field>
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_form"/>
        <field name="arch" type="xml">
            <!--Botones geolocalización-->
            <xpath expr="//field[@name='amount']" position='before'>
                <field name="start_latitude" invisible="1"/>
                <field name="start_longitude" invisible="1"/>
                <field name="end_latitude" invisible="1"/>
                <field name="end_longitude" invisible="1"/>
            </xpath>
            <div name="button_box" position="inside">
                <button
                    name="button_start_geolocation"
                    string="Comienzo"
                    type="object"
                    icon="fa-map-marker text-success"
                    class="oe_stat_button"
                    title="Comienzo"
                />
                <button
                    name="button_stop_geolocation"
                    string="Fin"
                    type="object"
                    icon="fa-map-marker text-warning"
                    class="oe_stat_button"
                    title="Fin"
                />
            </div>

        </field>
    </record>

    <!--Tree view-->
    <record id="account_analytic_line_tree" model="ir.ui.view">
        <field name="name">account.analytic.line.tree</field>
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_tree" />
        <field name="arch" type="xml">
            <!--Botones geolocalización-->
            <field name="unit_amount" position="after">
                <field name="start_latitude" invisible="1"/>
                <field name="start_longitude" invisible="1"/>
                <field name="end_latitude" invisible="1"/>
                <field name="end_longitude" invisible="1"/>
                <button
                    name="button_start_geolocation"
                    string="Comienzo"
                    tabindex="-1"
                    type="object"
                    icon="fa-map-marker text-success"
                    class="oe_stat_button"
                    title="Comienzo"
                />
                <button
                    name="button_stop_geolocation"
                    string="Fin"
                    tabindex="-1"
                    type="object"
                    icon="fa-map-marker text-warning"
                    class="oe_stat_button"
                    title="Fin"
                />
            </field>
        </field>
    </record>

    <!--Kanban view-->
    <record id="view_kanban_account_analytic_line" model="ir.ui.view">
        <field name="name">account.analytic.line.kanban</field>
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="hr_timesheet.view_kanban_account_analytic_line" />
        <field name="arch" type="xml">
            <!--Botones geolocalización-->
            <xpath expr="//templates//field[@name='unit_amount']" position="after">
                <field name="show_time_control" invisible="1" />
                <a
                    name="button_start_geolocation"
                    string="Comienzo"
                    tabindex="-1"
                    type="object"
                    class="o_kanban_inline_block fa fa-lg fa-map-marker text-success"
                    title="Comienzo"
                />
                <a
                    name="button_stop_geolocation"
                    string="Fin"
                    tabindex="-1"
                    type="object"
                    class="o_kanban_inline_block fa fa-lg fa-map-marker text-warning"
                    title="Fin"
                />
            </xpath>
        </field>
    </record>

    <!--Form view-->
    <record model="ir.ui.view" id="project_timesheet_time_control_account_analytic_line_form_inherited">
        <field name="name">project.timesheet.time.control.account.analytic.line.form.inherited</field>
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="project_timesheet_time_control.hr_timesheet_line_form"/>
        <field name="arch" type="xml">
            <!--Botones para el grupo administrativo-->
            <xpath expr="//button[@name='button_resume_work']" position="attributes">
                <attribute name="groups">project_task_geolocation.group_geolocation_administrative</attribute>
            </xpath>
            <xpath expr="//button[@name='button_end_work']" position="attributes">
                <attribute name="groups">project_task_geolocation.group_geolocation_administrative</attribute>
            </xpath>
        </field>
    </record>

    <!--Tree view-->
    <record model="ir.ui.view" id="project_timesheet_time_control_account_analytic_line_tree_inherited">
        <field name="name">project.timesheet.time.control.account.analytic.line.tree.inherited</field>
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="project_timesheet_time_control.account_analytic_line_tree"/>
        <field name="arch" type="xml">
            <!--Botones para el grupo administrativo-->
            <xpath expr="//button[@name='button_resume_work']" position="attributes">
                <attribute name="groups">project_task_geolocation.group_geolocation_administrative</attribute>
            </xpath>
            <xpath expr="//button[@name='button_end_work']" position="attributes">
                <attribute name="groups">project_task_geolocation.group_geolocation_administrative</attribute>
            </xpath>
        </field>
    </record>

    <!--Kanban view-->
    <record model="ir.ui.view" id="project_timesheet_time_control_account_analytic_line_kanban_inherited">
        <field name="name">project.timesheet.time.control.account.analytic.line.kanban.inherited</field>
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="project_timesheet_time_control.view_kanban_account_analytic_line"/>
        <field name="arch" type="xml">
            <!--Botones para el grupo administrativo-->
            <xpath expr="//a[@name='button_resume_work']" position="attributes">
                <attribute name="groups">project_task_geolocation.group_geolocation_administrative</attribute>
            </xpath>
            <xpath expr="//a[@name='button_end_work']" position="attributes">
                <attribute name="groups">project_task_geolocation.group_geolocation_administrative</attribute>
            </xpath>
        </field>
    </record>


</odoo>